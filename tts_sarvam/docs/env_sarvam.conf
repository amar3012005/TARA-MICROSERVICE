# SARVAM AI TTS - DOCKER ENVIRONMENT VARIABLES
# Copy this to your .env or docker-compose.yml

# ============================================================================
# SARVAM AI API CONFIGURATION (Replaces LemonFox)
# ============================================================================

# CRITICAL: Get API key from https://sarvam.ai/
SARVAM_API_KEY=your_sarvam_api_key_here

# Model version (bulbul:v1 or bulbul:v2 - recommend v2)
SARVAM_TTS_MODEL=bulbul:v2

# Speaker voice (options: anushka, vidya, manisha, arya, abhilash, karun)
SARVAM_TTS_SPEAKER=anushka

# Language code (options: en-IN, hi, ta, te, kn, ml, mr, gu, bn, pa, as)
SARVAM_TTS_LANGUAGE=en-IN

# ============================================================================
# VOICE CONTROL PARAMETERS (New in Sarvam)
# ============================================================================

# Pitch adjustment: -0.75 (lower) to 0.75 (higher), default 0.0
SARVAM_TTS_PITCH=0.0

# Speech pace multiplier: 0.3 (slow) to 3.0 (fast), default 1.0
SARVAM_TTS_PACE=1.0

# Volume level: 0.1 (quiet) to 3.0 (loud), default 1.0
SARVAM_TTS_LOUDNESS=1.0

# Enable automatic text preprocessing (recommended: false)
SARVAM_TTS_PREPROCESSING=false

# ============================================================================
# AUDIO SETTINGS
# ============================================================================

# Sample rate: MUST BE 16000 for Sarvam (changed from 24000 for LemonFox)
LEIBNIZ_TTS_SAMPLE_RATE=16000

# Language code for audio (typically same as SARVAM_TTS_LANGUAGE)
LEIBNIZ_TTS_LANGUAGE_CODE=en-IN

# ============================================================================
# STREAMING & QUEUE SETTINGS
# ============================================================================

# Gap between sentences in milliseconds (natural pause)
LEIBNIZ_TTS_INTER_SENTENCE_GAP_MS=100

# FastRTC chunk duration in milliseconds (ultra-low latency)
LEIBNIZ_TTS_FASTRTC_CHUNK_MS=40

# Maximum sentences in queue at once
TTS_QUEUE_MAX_SIZE=10

# ============================================================================
# AUDIO CACHE SETTINGS
# ============================================================================

# Enable caching (saves bandwidth, faster playback for repeated phrases)
LEIBNIZ_TTS_CACHE_ENABLED=true

# Cache directory (must be writable by Docker container)
LEIBNIZ_TTS_CACHE_DIR=/app/audio_cache

# Maximum cache entries
LEIBNIZ_TTS_CACHE_MAX_SIZE=500

# Cache TTL in days (how long to keep cached audio)
LEIBNIZ_TTS_CACHE_TTL_DAYS=30

# ============================================================================
# SERVICE SETTINGS
# ============================================================================

# Port for TTS microservice
TTS_STREAMING_PORT=8005

# Request timeout in seconds
LEIBNIZ_TTS_TIMEOUT=30.0

# Retry attempts for failed requests
LEIBNIZ_TTS_RETRY_ATTEMPTS=3

# Delay between retries in seconds
LEIBNIZ_TTS_RETRY_DELAY=1.0

# ============================================================================
# REDIS (Optional - for orchestrator coordination)
# ============================================================================

# Redis host (default: localhost)
REDIS_HOST=localhost

# Redis port (default: 6379)
REDIS_PORT=6379

# ============================================================================
# OPTIMIZATION SETTINGS (Advanced - tunable for specific needs)
# ============================================================================

# For ultra-low latency tuning:
# - Reduce LEIBNIZ_TTS_FASTRTC_CHUNK_MS to 20ms (more CPU)
# - Increase SARVAM_TTS_PACE to 1.2 (faster speech)
# - Set LEIBNIZ_TTS_INTER_SENTENCE_GAP_MS to 50ms (shorter pause)

# For better audio quality:
# - Keep SARVAM_TTS_PACE at 1.0 or lower
# - Adjust SARVAM_TTS_LOUDNESS to 1.1 (slightly louder)
# - Use SARVAM_TTS_SPEAKER=vidya (warm voice for podcasts)

# For maximum cache efficiency:
# - Set LEIBNIZ_TTS_CACHE_MAX_SIZE to 1000
# - Set LEIBNIZ_TTS_CACHE_TTL_DAYS to 60

# ============================================================================
# EXAMPLE CONFIGURATIONS
# ============================================================================

# FAST / LIVE CHAT (Ultra-low latency):
# SARVAM_TTS_PACE=1.2
# LEIBNIZ_TTS_FASTRTC_CHUNK_MS=20
# LEIBNIZ_TTS_INTER_SENTENCE_GAP_MS=50

# BALANCED (Default):
# SARVAM_TTS_PACE=1.0
# LEIBNIZ_TTS_FASTRTC_CHUNK_MS=40
# LEIBNIZ_TTS_INTER_SENTENCE_GAP_MS=100

# PODCAST / AUDIOBOOK (High quality):
# SARVAM_TTS_PACE=0.9
# SARVAM_TTS_SPEAKER=vidya
# LEIBNIZ_TTS_FASTRTC_CHUNK_MS=80
# LEIBNIZ_TTS_INTER_SENTENCE_GAP_MS=150
